# Vue 的 diff 算法时间复杂度

Vue 的 diff 算法的时间复杂度是 O(n)，是在 O(n^3) 基础上优化而来。这里的 n 是指在对比两个树时，所需要比较的节点数量。只比较同层的节点，不跨级比较，所以时间复杂度是线性的。

Vue 使用了一种高效的 diff 算法，称为 patching 算法或静态树比较算法。基本思路是将新旧两个 VNode 树进行比较，找出它们之间的差异，然后根据这些差异来更新 DOM。在比较两个 VNode 树时，Vue 会遵循以下规则：

> - 如果两个节点不是同一类型，Vue 会直接销毁旧的节点并创建一个新的节点来替代它。
> - 如果两个节点是同一类型，Vue 会将新旧节点的 props 进行比较，找出它们之间的差异。然后根据这些差异更新旧节点的 props。
> - 如果两个节点是同一类型的组件，Vue 会比较它们的 key。如果 key 不同，Vue 会销毁旧的节点并创建一个新的节点来替代它。如果 key 相同，Vue 会复用旧的节点并更新它的 props。
