# 前端路由原理

稍微复杂一点的 SPA，都需要路由。Vue-router 是 Vue 全家桶标配之一。

Vue-router 路由模式有：`hash` 和 `H5 history`。

> - hash 变化会触发网页跳转，即浏览器的前进后退，但不会使浏览器刷新。
> - 浏览器的前进后退也会改变 hash。
> - hash 永远不会提交到 server 端。

```javascript
// 监听 hash 变化。hash 变化：可以通过 js 改变 hash，可以手动输如地址改变，可以通过浏览器前进后退改变
window.onhashchange = function (event) {
    console.log("event: ", event);
    console.log("old url: ", event.oldURL); // 获取原地址
    console.log("new url: ", event.newURL); // 获取新地址
};
```

H5 history 是使用 url 规范的路由，但跳转时不刷新页面。通过 `history.pushState` 和 `window.onpopstate` 来实现。

```javascript
history.pushState(state, '', 'page1');

window.onpopstate = function(event) {
    console.log("onpopstate", event.state, location.pathname);
}
```
